CREATE TABLE IF NOT EXISTS users (
  user_id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
  username TEXT UNIQUE NOT NULL,
  password TEXT NOT NULL,
  first_name TEXT NOT NULL,
  last_name TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  tools TEXT NOT NULL,
  start_date TIMESTAMP DEFAULT now(),
  role role DEFAULT 'User',
  github TEXT
);

CREATE TABLE IF NOT EXISTS projects (
  project_id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
  name TEXT NOT NULL,
  description TEXT NOT NULL,
  tools TEXT NOT NULL, 
  phase phase NOT NULL,
  status status NOT NULL,
  start_date TIMESTAMP DEFAULT now(),
  owner_id INTEGER REFERENCES users(user_id) ON DELETE CASCADE ON UPDATE CASCADE,
  owner TEXT REFERENCES users(username) ON DELETE CASCADE ON UPDATE CASCADE,
  collaboration BOOLEAN DEFAULT TRUE,
  github TEXT
);

CREATE TABLE IF NOT EXISTS issues (
  issue_id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
  name TEXT NOT NULL,
  description TEXT NOT NULL,
  project_id INTEGER REFERENCES projects(project_id) ON DELETE CASCADE ON UPDATE CASCADE,
  tools TEXT NOT NULL,
  phase phase NOT NULL,
  status status NOT NULL,
  start_date TIMESTAMP DEFAULT now(),
  owner_id INTEGER REFERENCES users(user_id) ON DELETE CASCADE ON UPDATE CASCADE,
  owner TEXT REFERENCES users(username) ON DELETE CASCADE ON UPDATE CASCADE,
  collaboration BOOLEAN DEFAULT TRUE,
  github TEXT
);